<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
	<title>投稿ページ</title>
	<link href="/css/common.css" rel="stylesheet">
	<link href="/css/post/list.css" rel="stylesheet">
	<link href="/css/post/comment.css" rel="stylesheet">
	<meta charset="utf-8" />
</head>

<body>
	<div id="include" th:insert="header"></div>

	<a href="/menu">メニュー</a> > <a href="/post/list">投稿一覧</a> > <span style="font-weight: bold;">投稿ページ</span>


	<h2 th:text="${post.title}">投稿ページ</h2>
	<p th:text="${post.postText}"></p>

	<h3>コメント</h3>

	<div th:each="comment : ${commentList}" th:object="${comment}">
		<div class="balloon_l" th:if="${userId} == ${comment.userId}">
			<div class="faceicon">
				<img th:attr="src='/img/icons/icon_' + ${#numbers.formatInteger(comment.getUser().getIcon(), 2)} + '.png'" alt="">
				<p class="name_l" th:text="${comment.getUser().getUserName}"></p>
			</div>
			<div class="says">
				<div class="message">
					<p th:text="*{commentText}"></p>
					<p class="time" th:text="*{createdAt}"></p>
				</div>
			</div>
		</div>

		<div class="balloon_r" th:if="${userId} != ${comment.userId}">
			<div class="faceicon">
				<img th:attr="src='/img/icons/icon_' + ${#numbers.formatInteger(comment.getUser().getIcon(), 2)} + '.png'" alt="">
				<p class="name_r" th:text="${comment.getUser().getUserName}"></p>
			</div>
			<div class="says">
				<div class="message">
					<p th:text="*{commentText}"></p>
					<p class="time" th:text="*{createdAt}"></p>
				</div>
			</div>
		</div>
	</div>
	<div>
		<form method="post" th:action="@{/comment/add}" style="display: inline" th:object="${comment}">
			<div class="cp_iptxt">
				<input type="hidden" name="postId" th:value="${post.id}" />
				<p class="error" style="color:mediumvioletred;" th:if="${#fields.hasErrors('commentText')}"
					th:error="${comment.commentText}">コメントを入力してください。</p>
				<input id="formarea" type="text" name="commentText" placeholder="コメント" th:field="${comment.commentText}">
				<input class="button" type="submit" value="コメントする" />
			</div>
		</form>
	</div>

</body>

</html>